<!DOCTYPE html>
<html>
<head>
  <title>Razorpay Payment</title>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>

<h2>Pay Now</h2>
<button id="payBtn">Pay</button>

<script>
  document.getElementById('payBtn').onclick = async function () {
    // Call your backend to create order
    const response = await fetch("http://localhost:8080/cart/payment", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImJoYXJnYXZnaG9uaXlhZ21haWwuY29tIiwiaWF0IjoxNzUwOTU2NTgyLCJleHAiOjE3ODI0OTI1ODJ9.5RSqU56n4UBLUs2WHv1Y67XJ_z0H3HEhREh1Ds7x_9w"
      }
    });

    const data = await response.json();

    if (!data || !data.order || !data.key) {
      alert("Failed to load Razorpay order.");
      return;
    }

    const options = {
      key: data.key, 
      amount: data.order.amount, 
      currency: "INR",
      name: "Ecommerce App",
      description: "Test Transaction",
      order_id: data.order.id,
      handler: function (response) {
        alert("Payment Successful!");
        console.log("Payment ID:", response.razorpay_payment_id);
        console.log("Order ID:", response.razorpay_order_id);
        console.log("Signature:", response.razorpay_signature);
      },
      theme: {
        color: "#3399cc"
      }
    };

    const razor = new Razorpay(options);
    razor.open();
  };
</script>

</body>
</html>
